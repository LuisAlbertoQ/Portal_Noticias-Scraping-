{% extends 'base_auth.html' %}
{% load static %}

{% block content %}
<div class="fade-in">
    <section class="profile-section">
        <div class="profile-container">
            <!-- Header del Perfil -->
            <div class="profile-header">
                <div class="profile-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <h2>{{ user.username }}</h2>
                <div class="profile-role">{{ role|default:"Usuario" }}</div>
            </div>

            <!-- Contenido del Perfil -->
            <div class="profile-content">
                <!-- Estadísticas -->
                <div class="profile-stats">
                    <div class="stat-card">
                        <span class="stat-number">{{ noticias_vistas_count|default:0 }}</span>
                        <span class="stat-label">Noticias vistas</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number secondary">47</span>
                        <span class="stat-label">Favoritos guardados</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number success">{{ dias_activo|default:1 }}</span>
                        <span class="stat-label">Días activo</span>
                    </div>
                </div>

                <!-- Información del Usuario -->
                <div class="info-grid">
                    <div class="info-card">
                        <h3><i class="fas fa-user-circle me-2"></i>Información Personal</h3>
                        <div class="info-item">
                            <span class="info-label"><i class="fas fa-user me-2"></i>Usuario:</span>
                            <span class="info-value">{{ user.username }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label"><i class="fas fa-envelope me-2"></i>Email:</span>
                            <span class="info-value">{{ user.email|default:"No configurado" }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label"><i class="fas fa-user-tag me-2"></i>Rol:</span>
                            <span class="info-value">{{ role|default:"Usuario" }}</span>
                        </div>
                    </div>

                    <div class="info-card">
                        <h3><i class="fas fa-chart-line me-2"></i>Información de la Cuenta</h3>
                        <div class="info-item">
                            <span class="info-label"><i class="fas fa-calendar-plus me-2"></i>Fecha de registro:</span>
                            <span class="info-value">{{ user.date_joined|date:"d/m/Y" }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label"><i class="fas fa-sign-in-alt me-2"></i>Último acceso:</span>
                            <span class="info-value">{{ user.last_login|date:"d/m/Y H:i"|default:"Nunca" }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label"><i class="fas fa-circle me-2"></i>Estado:</span>
                            <span class="info-value" style="color: var(--success-color);">
                                <i class="fas fa-check-circle me-1"></i>Activo
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Acciones Rápidas -->
                <div class="quick-actions">
                    <h3><i class="fas fa-bolt me-2"></i>Acciones Rápidas</h3>
                    <div class="actions-grid">
                        <a href="{% url 'lista_noticias' %}" class="action-btn">
                            <div class="action-icon">
                                <i class="fas fa-newspaper"></i>
                            </div>
                            <span>Ver Noticias</span>
                        </a>
                        <a href="#" class="action-btn">
                            <div class="action-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <span>Mis Favoritos</span>
                        </a>
                        <a href="#" class="action-btn">
                            <div class="action-icon">
                                <i class="fas fa-key"></i>
                            </div>
                            <span>Cambiar Contraseña</span>
                        </a>
                    </div>
                </div>

                <!-- Actividad Reciente -->
                <div class="recent-activity">
                    <h3><i class="fas fa-history me-2"></i>Actividad Reciente</h3>
                    
                    {% for actividad in actividades_recientes %}
                    <div class="activity-item">
                        <div class="activity-icon">
                            {% if actividad.tipo == 'vista' %}
                                <i class="fas fa-eye"></i>
                            {% elif actividad.tipo == 'busqueda' %}
                                <i class="fas fa-search"></i>
                            {% elif actividad.tipo == 'compartir' %}
                                <i class="fas fa-share"></i>
                            {% elif actividad.tipo == 'login' %}
                                <i class="fas fa-sign-in-alt"></i>
                            {% elif actividad.tipo == 'scraping' %}
                                <i class="fas fa-download"></i>
                            {% else %}
                                <i class="fas fa-circle"></i>
                            {% endif %}
                        </div>
                        <div class="activity-content">
                            <div class="activity-text">{{ actividad.descripcion }}</div>
                            <div class="activity-time">{{ actividad.tiempo_relativo }}</div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="activity-item">
                        <div class="activity-content">
                            <div class="activity-text">Aún no tienes actividad registrada</div>
                            <div class="activity-time">Tu actividad aparecerá aquí</div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
</div>
{% endblock %}